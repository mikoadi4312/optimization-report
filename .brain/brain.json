{
    "meta": {
        "schema_version": "1.1.0",
        "awf_version": "3.3.0"
    },
    "project": {
        "name": "yusuf-adi-pratama---optimization-report-10",
        "type": "Electron Desktop App",
        "status": "In Development"
    },
    "tech_stack": {
        "frontend": {
            "framework": "React",
            "build_tool": "Vite",
            "language": "TypeScript",
            "styling": "Tailwind CSS"
        },
        "backend": {
            "runtime": "Electron (Node.js)",
            "communication": "IPC (Inter-Process Communication)"
        },
        "database": {
            "type": "SQLite",
            "library": "sqlite3",
            "file": "optimization_report.db"
        }
    },
    "database_schema": {
        "summary": "Local SQLite database to store persistent data for reports, replacing volatile Excel uploads.",
        "tables": [
            {
                "name": "deposit_transactions",
                "columns": [
                    "id (INTEGER PRIMARY KEY AUTOINCREMENT)",
                    "store_code (TEXT)",
                    "voucher_no (TEXT UNIQUE)",
                    "customer_name (TEXT)",
                    "date (TEXT)",
                    "amount (REAL)",
                    "type (TEXT) - 'DEPOSIT' or 'REFUND'",
                    "reference (TEXT)",
                    "content (TEXT)"
                ],
                "relationships_explained": "Standalone table for storing historical deposit transactions."
            }
        ]
    },
    "api_endpoints": [
        {
            "channel": "db:get-deposit-data",
            "type": "IPC",
            "explained": "Retrieves all deposit transactions from the database, ordered by date and ID descending."
        },
        {
            "channel": "db:import-deposit",
            "type": "IPC",
            "explained": "Imports a list of transactions. Updates existing records if 'voucher_no' matches, otherwise inserts new records."
        }
    ],
    "features": [
        {
            "name": "SQL Pilot (Deposit Tools)",
            "status": "In Progress",
            "description": "Migration from Excel-based volatile storage to SQLite persistent storage for Deposit Tools."
        },
        {
            "name": "Staff FIFO Mistake Report",
            "status": "Implemented",
            "description": "Report for tracking staff FIFO errors."
        }
    ],
    "knowledge_items": {
        "patterns": [
            {
                "name": "IPC Transaction Handling",
                "description": "Uses 'ipcMain.handle' for async database operations. Returns { success: true/false, data/error }."
            }
        ],
        "gotchas": [
            {
                "issue": "Electron Rebuild",
                "solution": "Native modules like 'better-sqlite3' must be rebuilt for Electron using '@electron/rebuild'."
            }
        ]
    }
}